(this.webpackJsonpparticles=this.webpackJsonpparticles||[]).push([[0],{15:function(t,e,n){},16:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),d=(n(15),n(5)),c=n(6),u=n(2),v=n(9),l=n(8),f=(n(16),n(7));function h(t,e){var n=e-t;return t+Math.random()*n}function m(t){return h(-t,t)}function p(t){switch(t.type){case 0:return y(t.x,t.y)}}function y(t,e){var n=t,i=e;return{emit:function(){for(var t,e,a,r=[],o=10;--o;)if(a=.55,Math.random()<a){var s=m(1.9),d=m(1.9),c=-h(0,.05),u=-h(0,.05);r.push({x:n,y:i,vx:s,vy:d,ax:c*s,ay:u*d,radius:8,vRadius:.8*(t=.25,e=.25,-h(t-e,t+e)),r:270,g:220,b:120,a:.6*~~h(180,200),vr:4,vg:-1,vb:-1,va:-h(7,10)})}return r}}}function E(t,e){var n=2*Math.PI,i=t.width,a=t.height,r=t.getContext("2d"),o=e.map(p),s=[],d=!1,c=!0;function u(){d||(c&&function(){for(var t=o.length,e=0;e<t;++e){var n=o[e].emit();s.push.apply(s,Object(f.a)(n))}}(),function(){for(var t=s.length,e=0;e<t;++e){var n=s[e];n.a+=n.va,n.a<=0?(s.splice(e,1),--e,--t):(n.x+=n.vx,n.y+=n.vy,n.vx+=n.ax,n.vy+=n.ay,n.radius+=n.vRadius,n.r+=n.vr,n.g+=n.vg,n.b+=n.vb)}}(),r.clearRect(0,0,i,a),function(){for(var t=s.length,e=0;e<t;++e){var i=s[e];r.fillStyle=g(i),r.beginPath(),r.arc(i.x,i.y,i.radius,0,n),r.closePath(),r.fill()}}()),requestAnimationFrame(u)}return window.addEventListener("keydown",(function(t){" "===t.key&&(d=!1)})),window.addEventListener("keyup",(function(t){" "===t.key&&(d=!0)})),window.addEventListener("keypress",(function(t){"p"===t.key&&(c=!c)})),u(),{pushEmitter:function(t,e,n){o.push(y(e,n))},popEmitter:function(){o.pop()}}}function g(t){return"rgba("+t.r+","+t.g+","+t.b+","+t.a/255+")"}var k="Chs2021Apparel.Particle.EmitterCoordinates";function w(t){localStorage.setItem(k,JSON.stringify(t))}function b(){var t=localStorage.getItem(k);return null===t?[]:JSON.parse(t)}var C=function(t){Object(v.a)(n,t);var e=Object(l.a)(n);function n(t){var i;return Object(d.a)(this,n),(i=e.call(this,t)).canvasRef=void 0,window.app=Object(u.a)(i),i.state={addedEmitters:b(),shouldAddEmitter:!1,sceneModifier:void 0},i.canvasRef=r.a.createRef(),i.bindMethods(),i}return Object(c.a)(n,[{key:"bindMethods",value:function(){this.onCanvasClick=this.onCanvasClick.bind(this)}},{key:"componentDidMount",value:function(){this.addEventListeners(),this.startAnimationLoop()}},{key:"startAnimationLoop",value:function(){var t=this.canvasRef.current;if(null===t)throw new Error("Cannot find canvas.");var e=E(t,this.state.addedEmitters);this.setState({sceneModifier:e})}},{key:"addEventListeners",value:function(){var t=this;window.addEventListener("keydown",(function(e){"e"===e.key&&t.setState({shouldAddEmitter:!0})})),window.addEventListener("keyup",(function(e){"e"===e.key&&t.setState({shouldAddEmitter:!1})})),window.addEventListener("keypress",(function(e){"r"===e.key&&t.removeEmitter()}))}},{key:"removeEmitter",value:function(){var t=this;this.state.addedEmitters.length>0?this.setState((function(t){var e=t.addedEmitters.slice(0,-1);return w(e),{addedEmitters:e}}),(function(){var e;null===(e=t.state.sceneModifier)||void 0===e||e.popEmitter()})):alert("No user-added emitters to remove.")}},{key:"render",value:function(){return Object(i.jsx)("div",{className:"App",children:Object(i.jsx)("canvas",{ref:this.canvasRef,width:2e3,height:800,onClick:this.onCanvasClick})})}},{key:"onCanvasClick",value:function(t){var e=this,n=t.clientX,i=t.clientY;if(t.altKey)this.setState((function(t){return{addedEmitters:t.addedEmitters.slice(0,-1)}}),(function(){console.log("after removal",e.state.addedEmitters),window.alert("Removed previous point.")}));else{var a=t.target.getBoundingClientRect(),r=n-a.left,o=i-a.top;this.addEmitterIfNeeded(r,o)}}},{key:"addEmitterIfNeeded",value:function(t,e){var n=this;this.state.shouldAddEmitter&&this.setState((function(n){var i=n.addedEmitters.concat([{type:0,x:t,y:e}]);return w(i),{addedEmitters:i}}),(function(){var i;console.log("Latest emitter coordinates: ",n.state.addedEmitters),null===(i=n.state.sceneModifier)||void 0===i||i.pushEmitter(0,t,e)}))}}]),n}(r.a.Component),x=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),i(t),a(t),r(t),o(t)}))};s.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(C,{})}),document.getElementById("root")),x()}},[[17,1,2]]]);
//# sourceMappingURL=main.a5d2ff6c.chunk.js.map